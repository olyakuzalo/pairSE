!function(){var t=function(t){var e={exports:{}};return t.call(e.exports,e,e.exports),e.exports},e=(window,function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()),n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(t){return t&&t.__esModule?t:{"default":t}},r=Shopify.Events,o=Shopify.routes;(function(){Shopify.BookmarkShortcut=function(){function t(t,e){this.$node=$(t),this.browser=Shopify.Browser,(this.browser.isMac()||this.browser.isWindows())&&this.browser.isKnownBrowser()&&!this.browser.isMobile()&&(this.bindShortcut(this.getModKey(),this.getKey(),e),this.$node.append(this.shortcutAsHTML()))}return t.prototype.shortcutAsHTML=function(){var t;return t=this.browser.isMac()?"\u2318":"Ctrl","Press "+this.keyToHTML(t)+" + "+this.keyToHTML("D")+" to bookmark your Shopify admin."},t.prototype.keyToHTML=function(t){return'<span class="keyboard-key s-none">'+t+"</span>"},t.prototype.bindShortcut=function(t,e,n){return Shopify.hotshot.bindCombo([t,e],function(t){return function(){return t.cardActions(n)}}(this))},t.prototype.getKey=function(){return 68},t.prototype.getModKey=function(){return this.browser.isMac()?91:17},t.prototype.cardActions=function(t){return t.hide(),t.onAction()},t}()}).call(this),function(){Shopify.DashboardActivity=function(){function t(t){this.activityFilter=t||"all"}return t.prototype.activityLoading=!1,t.prototype.loadMoreActivity=function(t){return this.activityLoading=!0,this.xhr&&this.xhr.abort(),this.xhr=$.ajax({dataType:"html",data:{activity_pages:t,activity_filter:this.activityFilter},url:"/admin/dashboard/activity_feed",success:function(t){return function(){return Page.refresh({onlyKeys:["dashboardActivity"],response:t.xhr})}}(this),done:function(){return this.activityLoading=!1}}),this.xhr.fail(Shopify.handleError)},t}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Shopify.SummaryReport=function(){function e(e,n){var i;null==n&&(n={}),this.changeChannelProvider=t(this.changeChannelProvider,this),this.changeDateRange=t(this.changeDateRange,this),this.$node=$(e),this.queryProps||(this.queryProps={startDate:"-30d",endDate:"-1d",channelFilter:""}),i=Object.assign({},n.actionConfig),i[Shopify.SummaryReportChannelpicker.CHANNEL_CHANGED_EVENT]=this.changeChannelProvider,Shopify.rootDispatcher.register(i).bindToNode(e),this.initializeView(),this._load()}return e.prototype.FINANCES_PATH="finances/show",e.prototype.queries=function(){throw new Error("Subclasses must define at least one shopifyQL query.")},e.prototype.initializeView=function(){},e.prototype.createTemplate=function(t){var e;return e=this.$node.find(t).remove(),_.template(e.html())},e.prototype.append=function(t,e){return this.$node.empty(),this.$node.append(t(e))},e.prototype.extractKey=function(t){var e,n,i;return n=t.query.columns[0].field,i=Shopify.Inflection.classify(n),e=i.charAt(0).toLowerCase()+i.substring(1)},e.prototype.changeDateRange=function(t){var e,n,i;return n=t.data,i=n.startDate,e=n.endDate,this.queryProps.startDate=i,this.queryProps.endDate=e,this._load()},e.prototype.changeChannelProvider=function(t){var e,n,i;return i=t.data.split("-"),e=i[0],n=i[1],"all"===e?this.queryProps.channelFilter="":(this.queryProps.channelFilter="WHERE channel_provider_id == "+e,n&&(this.queryProps.channelFilter+=" AND location_id == '"+n+"'")),this._load()},e.prototype._load=function(){var t,e;return this.renderLoading&&this.renderLoading(),t=this.queries(),Promise.all(function(){var n;n=[];for(e in t)n.push(Shopify.AnalyticsAPI.query(t[e]));return n}()).then(this.renderResult.bind(this))["catch"](this.renderError.bind(this))},e.prototype.renderResult=function(t,e,n){throw new Error("Subclasses must handle successful query results.")},e.prototype.renderError=function(t,e,n){throw new Error("Subclasses must handle failed query results.")},e}()}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}};n="2",t="reports:channelpicker:channel-changed",e="SHOW order_count\nFROM orders\nWHERE financial_status != 'refunded'\nSINCE -90d\nUNTIL 0d",Shopify.SummaryReportChannelpicker=function(){function n(t,e){this._onChannelChanged=i(this._onChannelChanged,this),this.channelLabels={},this.$node=$(t),e.forEach(function(t){return function(e){var n,i;return n=e.id.split("-")[1],n?(i=e.name.indexOf("\u2014"),t.channelLabels[e.id]=e.name.substring(i+1)):t.channelLabels[e.id]=e.name}}(this)),Shopify.rootDispatcher.register(Shopify.SummaryReportChannelpicker.CHANNEL_CHANGED_EVENT,this._onChannelChanged).bindToNode(t),this._checkForOtherOrders()}return n.CHANNEL_CHANGED_EVENT=t,n.prototype.setChannel=function(e){return this.currentChannelId=e,Shopify.rootDispatcher.dispatch({type:t,data:this.currentChannelId}),Shopify.UIPopover.deactivate()},n.prototype._onChannelChanged=function(t){return this.currentChannelId=t.data,this.currentChannelLabel=this.channelLabels[this.currentChannelId]},n.prototype._checkForOtherOrders=function(){return Shopify.AnalyticsAPI.query(e).then(function(t){return function(e){var n;return n=e.result.data[0][0]>0,n?t.$node.find(".js-other-channel").removeClass("hide"):void 0}}(this))},n}()}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}};t=2,e=250,Shopify.CardConsumption=function(){function i(t){this._resetTimer=n(this._resetTimer,this),this._recordConsumedCards=n(this._recordConsumedCards,this),this._consumedCards=n(this._consumedCards,this),this.cleanup=n(this.cleanup,this),this.requestId=t.requestId,this.window=$(window),this.throttledFunction=_.throttle(this._resetTimer,e),Page.onReplace($(".page")[0],this.cleanup)}return i.prototype.watch=function(){return this.window.on("scroll",this.throttledFunction),this._startTimer()},i.prototype.cleanup=function(){return this._clearTimer(),this.window.off("scroll",this.throttledFunction)},i.prototype._consumedCards=function(){var t;return t=[],$(".ui-feed__item--card").each(function(e){return function(n,i){var r,o,a,s;return r=$(i),a=r.data("handle"),o=r.data("analytics-group"),s=n+1,e._isOnScreen(r)?t.push({handle:a,analytics_group:o,position:s}):void 0}}(this)),t},i.prototype._recordConsumedCards=function(){var t;return t=this._consumedCards(),t.length>0?this._submitConsumedCards(t):void 0},i.prototype._isOnScreen=function(t){var e,n,i,r;return n=$(".header").height()+$("#turbo").height(),i=this.window.scrollTop(),r={top:i+n,bottom:i+this.window.height()},e=t.offset(),e.bottom=e.top+t.outerHeight(),e.top>=r.top&&e.bottom<=r.bottom},i.prototype._startTimer=function(){return this.timeout=window.setTimeout(this._recordConsumedCards,1e3*t)},i.prototype._clearTimer=function(){return this.timeout&&window.clearTimeout(this.timeout),this.timeout=null},i.prototype._resetTimer=function(){return this._clearTimer(),this._startTimer()},i.prototype._submitConsumedCards=function(t){return $.ajax({url:"/admin/home/consume_cards",data:JSON.stringify({cards:t,original_request_id:this.requestId}),type:"POST",contentType:"application/json"})},i}()}.call(this),function(){Shopify.CenterPopup=function(t,e){var n,i,r,o;return i=500,n=400,r=screen.width/2-i/2,o=screen.height/2-n/2,window.open(t,e,"width="+i+", height="+n+", left="+r+", top="+o+", toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, copyhistory=no, resizable=yes")}}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}};t={VOTE_DIALOG_HEADER:"next-card--home-card-feedback",VOTE_DIALOG_SURVEY:"survey",VOTE_DIALOG_THANKS:"thanks",FEEDBACK_OVERLAY:"js-home-card-feedback-overlay",UNDO_OVERLAY:"js-home-card-undo-overlay",FEEDBACK_MENU:"js-feedback-menu",DROPDOWN_BUTTON:"js-dropdown-button",CARD:"next-card",HIDE:"hide",POPOVER_BUTTON:"btn--popover-activator"},e={ANIMATION:200,HIDE:2500},n={FEEDBACK_BASE:250,FEEDBACK_REASON:28,UNDO_OVERLAY:150},Shopify.HomeCard=function(){function r(e,n){this.options=null!=n?n:{},this._unregisterOnActionListeners=i(this._unregisterOnActionListeners,this),this._hideUndoOverlay=i(this._hideUndoOverlay,this),this.hideVoteDialog=i(this.hideVoteDialog,this),this.onAction=i(this.onAction,this),this.$node=$(e),this.$cardNode=this.$node.find("."+t.CARD).first(),this.$voteDialogNode=this.$node.find("."+t.VOTE_DIALOG_HEADER),this.$popoverButtonNode=this.$node.find("."+t.POPOVER_BUTTON),this._registerOnActionListeners(),Page.onReplace(e,this._unregisterOnActionListeners)}return r.prototype.onAction=function(){return this._submit(this.options.register_card_engagement_url,_.pick(this.options,["handle","analytics_group"]))},r.prototype.dismiss=function(){return Shopify.UIPopover.deactivate(),this._storeOriginalHeight(),this._resizeToUndoOverlayHeight(),this.$popoverButtonNode.addClass("hide"),this._submit(this.options.dismiss_card_url,_.pick(this.options,["handle","analytics_group"])),this._updateUndoDialog({heading:"You dismissed this card",message:this.options.dismiss_message,action:"dismiss"})},r.prototype.upvote=function(){return this._submit(this.options.upvote_card_url,_.pick(this.options,["handle","analytics_group"])),this._updateVoteDialogThanks()},r.prototype.downvote=function(){return this._submit(this.options.downvote_card_url,_.pick(this.options,["handle","analytics_group"])),this._updateVoteDialogThanks()},r.prototype.showFeedbackDialog=function(){return Shopify.UIPopover.deactivate(),this._storeOriginalHeight(),this.$popoverButtonNode.addClass("hide"),this.$node.find("."+t.FEEDBACK_OVERLAY).removeClass(t.HIDE),this.$node.find('input[type="radio"].feedback-reason').first().focus(),this.$cardNode.animate({height:this._feedbackHeight(),"min-height":this._feedbackHeight()},{duration:e.ANIMATION,complete:function(t){return function(){return t.$cardNode.css({overflow:"hidden"})}}(this)})},r.prototype.hideFeedbackDialog=function(){return this.$node.find("."+t.FEEDBACK_OVERLAY).addClass(t.HIDE),this.selectedFeedbackOption=null,this.selectedFeedbackComment=null},r.prototype.cancelFeedbackDialog=function(){return this.hideFeedbackDialog(),this._resizeToOriginalHeight(),this.$popoverButtonNode.removeClass("hide")},r.prototype.hideVoteDialog=function(){return this.$voteDialogNode.animate({opacity:0,height:0,"min-height":0},{duration:e.ANIMATIONS})},r.prototype.undo=function(){return"dismiss"===this.undoAction?(this._submit(this.options.undo_dismiss_card_url,_.pick(this.options,["handle","analytics_group"])),this._hideUndoOverlay()):void 0},r.prototype.submitFeedback=function(){var t;return t={handle:this.options.handle,analytics_group:this.options.analytics_group,feedback:this.selectedFeedbackOption,comment:this.selectedFeedbackComment},this._submit(this.options.submit_feedback_url,t),this.hideFeedbackDialog(),this._resizeToUndoOverlayHeight(),this._updateUndoDialog({heading:"Thanks for your feedback",message:"It will be used to improve your home feed.",action:null}),setTimeout(this._hideUndoOverlay,e.HIDE)},r.prototype.isFeedbackSelected=function(){return this.selectedFeedbackOption||this.selectedFeedbackComment},r.prototype.hide=function(){return this.$node.animate({opacity:0,height:0,"min-height":0},{duration:e.ANIMATION,complete:function(t){return function(){return t.$node.remove(),$(".next-card.overlaid").length?void 0:window.location.reload()}}(this)})},r.prototype._hideUndoOverlay=function(){return this._resizeToOriginalHeight(),this.$popoverButtonNode.removeClass("hide"),this._updateUndoDialog({}),Twine.refresh()},r.prototype._updateVoteDialogThanks=function(){return this.$voteDialogNode.find("."+t.VOTE_DIALOG_SURVEY).addClass("hide"),this.$voteDialogNode.find("."+t.VOTE_DIALOG_THANKS).removeClass("hide"),setTimeout(this.hideVoteDialog,e.HIDE)},r.prototype._updateUndoDialog=function(t){return this.undoHeading=t.heading,this.undoMessage=t.message,this.undoAction=t.action},r.prototype._submit=function(t,e){return $.ajax({url:t,type:"POST",data:e})},r.prototype._feedbackHeight=function(){var t;return t=this.$node.find('input[type="radio"].feedback-reason').length,Shopify.Breakpoints.PAGE_CONDENSED.matches?n.FEEDBACK_BASE+n.FEEDBACK_REASON*t:n.FEEDBACK_BASE+n.FEEDBACK_REASON*Math.ceil(t/2)},r.prototype._storeOriginalHeight=function(){return this.originalHeight=this.$cardNode.height()},r.prototype._resizeToOriginalHeight=function(){return this.$cardNode.animate({height:this.originalHeight,"min-height":this.originalHeight},{duration:e.ANIMATION,complete:function(t){return function(){return t.$cardNode.css({overflow:""})}}(this)})},r.prototype._resizeToUndoOverlayHeight=function(){return this.$cardNode.animate({height:n.UNDO_OVERLAY,"min-height":n.UNDO_OVERLAY},{duration:e.ANIMATION,complete:function(t){return function(){return t.$cardNode.css({overflow:"hidden"})}}(this)})},r.prototype._registerOnActionListeners=function(){var e;return e="a, input[type=submit], button:not(."+t.FEEDBACK_OVERLAY+" button, ."+t.UNDO_OVERLAY+" button, ."+t.FEEDBACK_MENU+" button, ."+t.DROPDOWN_BUTTON+")",this.$cardNode.on("click",e,this.onAction)},r.prototype._unregisterOnActionListeners=function(){return this.$cardNode.off("click",this.onAction)},r}()}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.CustomFeedCard=function(e){function n(t,e){this.selector=t,this.options=e,n.__super__.constructor.apply(this,arguments),this.$node.find('.btn[href="#"]').on("click",function(t){return function(e){return e.preventDefault(),t.hide()}}(this))}return t(n,e),n}(Shopify.HomeCard)}.call(this),function(){var t,e,n,i,r=function(t,e){return function(){return t.apply(e,arguments)}};n="next-card__section",e="notification",i=2,t=["/admin/experts/redirect"],Shopify.Home=function(){function o(t){this._popoverActivating=r(this._popoverActivating,this),this._loadDismissHandlers(),this._closeSidebarOnNavToggle(),window.home=this}return o.prototype.initialize=function(){return this._externalizeHomeLinks(),this._setPopoverHandlers(),this._showMobileAppBanner()},o.prototype._externalizeHomeLinks=function(){return $(".page-home-index .page__content a").each(function(t){return function(e,n){var i,r;return n.host!==window.location.host&&"javascript:"!==n.protocol||t._isRedirectedExternalLink(n)?(i=$(n),i.attr("target","_blank"),i.addClass("external-link"),r=i.attr("href"),i.attr("href",t._addUtmParams(r))):void 0}}(this))},o.prototype._isRedirectedExternalLink=function(e){var n,i,r;for(n=0,i=t.length;i>n;n++)return r=t[n],-1!==e.href.indexOf(r)},o.prototype._setPopoverHandlers=function(){var t;return t=$(".ui-feed"),t.on(Shopify.UIPopover.EVENTS.ACTIVATING,".next-popover",this._popoverActivating),t.on(Shopify.UIPopover.EVENTS.DEACTIVATED,".next-popover",this._popoverDeactivating),Page.onReplace(t[0],function(){return t.off(Shopify.UIPopover.EVENTS.ACTIVATING),t.off(Shopify.UIPopover.EVENTS.DEACTIVATED)})},o.prototype._showMobileAppBanner=function(){return Shopify.Browser.isMobile()?$(".home-mobile-app-banner").addClass("home-mobile-app-banner--is-enabled"):void 0},o.prototype._popoverActivating=function(t){return $(t.target).closest(".next-card").css("z-index",i)},o.prototype._popoverDeactivating=function(t){return $(t.target).closest(".next-card").css("z-index","")},o.prototype._closeSidebarOnNavToggle=function(){var t,e;return t=$(".nav-toggle button"),e=$(".page-home-index")[0],t.on("click",function(t){return function(){return $(".page--sidebar-is-visible").length?t.toggleSidebar():void 0}}(this)),Page.onReplace(e,function(){return t.off("click")})},o.prototype.toggleSidebar=function(){return $(".page").toggleClass("page--sidebar-is-visible"),setTimeout(function(){return $(window).trigger("resize")})},o.prototype._loadDismissHandlers=function(){return $("."+e+" a[tg-remote='delete']").one("click",this._removeNotificationAndSpacer)},o.prototype._removeNotificationAndSpacer=function(){var t,i,r;return i=$(this).closest("."+e),r=$(this).closest("."+n),t=r.children().length<=2?r:i,t.slideUp(150,function(){return i.next().is("HR")&&i.next().remove(),i.remove(),0===r.children().length&&r.remove(),Shopify.Loading.stop()})},o.prototype._addUtmParams=function(t){var e,n;return e="",-1!==t.indexOf("#")&&(e=t.slice(t.indexOf("#")),t=t.slice(0,t.indexOf("#"))),n=this._hasParams(t),this._hasHmac(t)||(t=this._addParam(t,"utm_source","Shopify",!n),t=this._addParam(t,"utm_medium","AdminHomefeed"),t=this._addParam(t,"utm_campaign","Homecards")),t+e},o.prototype._addParam=function(t,e,n,i){var r;return null==i&&(i=!1),-1!==t.indexOf(e)?t:(r=i?"?":"&",""+t+r+e+"="+n)},o.prototype._hasParams=function(t){return-1!==t.indexOf("?")},o.prototype._hasHmac=function(t){return this._hasParams(t)&&-1!==t.indexOf("hmac=")},o}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Shopify.Notification=function(){function e(e,n){this.options=n,this.onAction=t(this.onAction,this),this.$node=$(e),this._createOnActionListeners()}return e.prototype.onAction=function(){return $.ajax({url:this.options.register_card_engagement_url,type:"POST",data:_.pick(this.options,["handle","analytics_group","data"])})},e.prototype.hide=function(){return this.$node.animate({opacity:0,height:0,"min-height":0},{duration:200,complete:function(t){return function(){return t.$node.remove(),Shopify.Loading.stop()}}(this)})},e.prototype._createOnActionListeners=function(){return this.$node.find("a").on("click",this.onAction)},e}()}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.QuestionCard=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}var i,r,o;return t(n,e),i=".platform-feedback__input-container",o=".platform-feedback__image--select-state",r=".platform-feedback__image--null-state",n.prototype.submitResult=function(t){return t=JSON.parse(t),"error"in t?Shopify.Flash.error(t.error):(Shopify.Flash.notice("Thanks for your feedback!"),this.hide())},n.prototype.toggleImage=function(){return $(i).each(function(t,e){return $(e).find("input")[0].checked?($(e).find(o).removeClass("hide"),$(e).find(r).addClass("hide")):($(e).find(r).removeClass("hide"),$(e).find(o).addClass("hide"))})},n}(Shopify.HomeCard)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.RequestedDocumentsNotification=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.onAction=function(){return n.__super__.onAction.apply(this,arguments),Bindings.context(document.body).uploadRequestedDocumentsModal.show()},n}(Shopify.Notification)}.call(this);t(function(t,o){"use strict";function a(t){t.each(function(t,e){var n=d["default"](e),i=n.find(".ui-feed__item.ui-feed__item--card"),r=u(i);l(i,r),c(n,i)})}function s(t){t.each(function(t,e){h["default"].bind(e)})}function u(t){var e=void 0;return t.toArray().map(function(t,n){return 0===n?(e=t.getBoundingClientRect().top,0):t.getBoundingClientRect().top-e})}function l(t,e){t.each(function(n,i){d["default"](i).css({zIndex:t.length-n,transform:"translateY(-"+e[n]+"px)"})})}function c(t,e){var n="400ms";requestAnimationFrame(function(){t.find(".js-animated-heading").css({opacity:"1"}),e.each(function(t,e){d["default"](e).css({transitionDuration:n,transform:"translateY(0)"}).one(r.transitionEnd(),function(){d["default"](e).css({transitionDuration:"",transform:"",zIndex:""})})})})}Object.defineProperty(o,"__esModule",{value:!0});var d=i($),h=i(Twine),p=function(){function t(e){n(this,t),this.timesRetried=0,this.onboarding=Boolean(e.onboarding),this.$feedNode=d["default"](".skeleton-feed")}return e(t,[{key:"loadHomeFeed",value:function(){var t=this;return new Promise(function(e){function n(){var t=this;this.$feedNode.find(".skeleton-feed__heading--section").removeClass("skeleton-feed__heading--section").addClass("home-channel-data-error").html("Unable to retrieve Home Feed. Retrying..."),5===this.timesRetried&&this.$feedNode.find(".home-channel-data-error").html("Unable to retrieve Home Feed. Please refresh the page to try again."),setTimeout(function(){t.timesRetried++,t.loadHomeFeed()},1e3*this.timesRetried)}d["default"].ajax({type:"GET",url:"/admin/home/feed",success:function(i,o,u){u.getResponseHeader("Shopify-Auth-Mechanisms")?n.bind(t):!function(){t.$feedNode.hide().html(i).show(),t.$feedNode.addClass("skeleton-feed--is-loaded");var n=t.$feedNode.find(".ui-feed");a(n),t.$feedNode.one(r.transitionEnd(),function(){d["default"](document).trigger("page:load"),s(n)}),e(i)}()},error:function(){n.call(t)}})})}},{key:"setupOnboarding",value:function(){return this.onboarding?(this.$feedNode.removeClass("hide"),!0):!1}}]),t}();o["default"]=p,Shopify.Skeleton=null!=o["default"]?o["default"]:o});(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Shopify.TodayFeature=function(){function e(e,n){this._updateData=t(this._updateData,this),this.stopPolling=t(this.stopPolling,this);var i;i=$(e).closest(".page")[0],this.data={totalSales:0},this.humanized={},this.salesDataFeed=new Shopify.PollableSalesMetric(n,this._updateData),n.hasOnlineStore&&(this.data.totalVisits=0,this.visitsDataFeed=new Shopify.PollableVisitsMetric(n,this._updateData)),Page.onReplace(i,this.stopPolling),this.startPolling()}return e.prototype.startPolling=function(){return this.salesDataFeed.startPolling(),this.visitsDataFeed?this.visitsDataFeed.startPolling():void 0},e.prototype.stopPolling=function(){return this.salesDataFeed.stopPolling(),this.visitsDataFeed?this.visitsDataFeed.stopPolling():void 0},e.prototype._updateData=function(t){var e,n;return n=0===this.data[Object.keys(t)[0]],e=t[Object.keys(t)[0]]<this.data[Object.keys(t)[0]],n||e?this._updateValuesAndRefresh(t):this._animateUpdateAndRefresh(t)},e.prototype._animateUpdateAndRefresh=function(t){var e,n,i,r;return t.totalSales&&(n=this._oneTenthOfDifferenceRaw(t.totalSales,this.data.totalSales)),t.totalVisits&&(i=this._oneTenthOfDifference(t.totalVisits,this.data.totalVisits)),t.totalOrders&&(e=this._oneTenthOfDifference(t.totalOrders,this.data.totalOrders)),r=window.setInterval(function(t){return function(){return n&&(t.data.totalSales+=n),i&&(t.data.totalVisits+=i),e&&(t.data.totalOrders+=e),t._humanizeDataAndRefresh()}}(this),100),window.setTimeout(function(e){return function(){return window.clearInterval(r),e._updateValuesAndRefresh(t)}}(this),1e3)},e.prototype._oneTenthOfDifference=function(t,e){return Math.floor(this._oneTenthOfDifferenceRaw(t,e))},e.prototype._oneTenthOfDifferenceRaw=function(t,e){return null==e&&(e=0),(t-e)/10},e.prototype._updateValuesAndRefresh=function(t){return t.totalSales&&(this.data.totalSales=t.totalSales),t.totalVisits&&(this.data.totalVisits=t.totalVisits),t.totalOrders&&(this.data.totalOrders=t.totalOrders),this._humanizeDataAndRefresh()},e.prototype._humanizeDataAndRefresh=function(){return(this.data.totalSales||0===this.data.totalSales)&&(this.humanized.totalSales=this._formatMoney(this.data.totalSales)),(this.data.totalVisits||0===this.data.totalVisits)&&(this.humanized.totalVisits=this._formatCount(this.data.totalVisits)),(this.data.totalOrders||0===this.data.totalOrders)&&(this.humanized.totalOrders=this._formatCount(this.data.totalOrders)),this.humanized.date=Shopify.Time.nowShop().moment.format("MMM D"),Twine.refresh()},e.prototype._formatCount=function(t,e){return Shopify.Number.withDelimiter(t)},e.prototype._formatMoney=function(t){return Shopify.Money.format(t,Shopify.Money.moneyUnencodedFormat())},e}()}).call(this);var a=(t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=i($),a=i(window.SafeLocalStorage),s="onboarding-feature--feed-hidden",u=function(){function t(e){n(this,t),this.node=e,this.feedHidden=a["default"].get(s,!0),this.storeNodeHeight()}return e(t,[{key:"storeNodeHeight",value:function(){o["default"](this.node).css({height:o["default"](this.node).height(),"max-height":o["default"](this.node).height()})}},{key:"closeFeature",value:function(){this.feedHidden&&this.toggleFeed(),o["default"](this.node).css({"max-height":0,opacity:0})}},{key:"toggleFeed",value:function(){this.feedHidden=!this.feedHidden,a["default"].set(s,this.feedHidden)}}]),t}();r["default"]=u,Shopify.OnboardingFeature=null!=r["default"]?r["default"]:r}),t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=i(Bugsnag),a=function(){function t(e,i){n(this,t),this.task=e,this.checked=i}return e(t,[{key:"revertCheckedState",value:function(){this.checked=!this.checked,o["default"].notify("GoalTaskCheckFailed","Failed to check")}}]),t}();r["default"]=a,Shopify.GoalTask=null!=r["default"]?r["default"]:r}));t(function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=i(a),u=i(Shopify.UIPopover),l=function(){function t(e,i){n(this,t),this.node=e,this.goal=i,this.tasks={},this.overlayDismissed=!1,this.overlayShown=!1,this.goalDismissed=!1}return e(t,[{key:"addTask",value:function(t,e){this.tasks[t]=new s["default"](t,e)}},{key:"isChecked",value:function(t){return this.tasks[t]&&this.tasks[t].checked}},{key:"allChecked",value:function(){var t=this;return Object.keys(this.tasks).reduce(function(e,n){return e&&t.isChecked(n)},!0)}},{key:"dismissOverlay",value:function(){this.overlayShown=!1,this.overlayDismissed=!0}},{key:"showOverlay",value:function(){u["default"].deactivate(),this.overlayShown=!0}},{key:"closeGoal",value:function(){this.goalDismissed=!0}},{key:"toggleState",value:function(t,e){var n=this.tasks[t];this.overlayDismissed=!1,n.checked=e.target.checked,e.target.checked?$.post(o.check_goal_task().html,{task_handle:t}).fail(function(){n.revertCheckedState()}):$.post(o.uncheck_goal_task().html,{task_handle:t}).fail(function(){n.revertCheckedState()})}}]),t}();r["default"]=l,Shopify.Goal=null!=r["default"]?r["default"]:r});(function(){var t,e,n,i,r,o,a,s=function(t,e){return function(){return t.apply(e,arguments)}},u=function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},l={}.hasOwnProperty;i="YYYY-MM-DD",n="MMM D",t="D",e={topHeight:20,bottomHeight:0,rightPadding:12,backgroundColor:"transparent",yAxisLabel:!1,height:140,yAxisTickCount:4,barPadding:.2,tooltipUnbounded:!0},Shopify.HomeSidebarReport=function(l){function c(t,e){this.channelId=e.channelId,this.homeSidebar=e.homeSidebar,this._newDateSelected=s(this._newDateSelected,this),c.__super__.constructor.call(this,t),this._newDateSelected({data:this.homeSidebar.initialDate}),this.ready=!0,this.URL_REGEX=/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/,Shopify.rootDispatcher.register(Shopify.HomeSidebarDatepicker.DATE_CHANGED_EVENT,this._newDateSelected).bindToNode(t)}return u(c,l),c.prototype.queries=function(){return this.homeSidebar.hasFinanceReports&&this.salesModelQueries?this.salesModelQueries():this.classicQueries()},c.prototype._load=function(){return this.ready&&this.homeSidebar.isActive(this.channelId)?c.__super__._load.apply(this,arguments):void 0},c.prototype._newDateSelected=function(t){var e,n,a;switch(this.homeSidebar.setActiveDate(t.data,this.formatDate(t.data)),t.data){case"today":return this.changeDateRange({data:{startDate:"0d",endDate:"0d"}});case"yesterday":return this.changeDateRange({data:{startDate:"-1d",endDate:"-1d"}});case"this_week":return this.changeDateRange({data:{startDate:o("week").format(i),endDate:r("week").format(i)}});case"this_month":return this.changeDateRange({data:{startDate:o("month").format(i),endDate:r("month").format(i)}});default:return n=t.data.split(","),a=n[0],e=n[1],this.changeDateRange({data:{startDate:a,endDate:e}})}},c.prototype.changeChannelProvider=function(t){return this.homeSidebar.setActiveChannel(t.data),c.__super__.changeChannelProvider.apply(this,arguments)},c.prototype.graphOptions=function(t){return _.assign({},e,t)},c.prototype.formatNumber=function(t){return Shopify.Number.withDelimiter(t)},c.prototype.formatMoney=function(t){return Shopify.Money.format(t,Shopify.Money.moneyUnencodedFormat())},c.prototype.formatMoneyCondensed=function(t){var e;return t>=0?Shopify.Money.condensed(t,Shopify.Money.moneyUnencodedFormat()):(e=Math.abs(t),e=Shopify.Money.condensed(e,Shopify.Money.moneyUnencodedFormat()),"\u2212"+e)},c.prototype.formatLink=function(t){return 0!==t.indexOf("https://")&&0!==t.indexOf("http://")?t:t.substring(t.indexOf("/")+2)},c.prototype.formatDate=function(e){var i,s,u,l,c,d;switch(d=Shopify.Time.nowShop().moment,e){case"today":return d.format(n);case"yesterday":return d.clone().subtract(1,"day").format(n);case"this_week":c=o("week"),s=r("week");break;case"this_month":c=o("month"),s=r("month");break;default:u=e.split(","),l=u[0],i=u[1],c=a(l),s=a(i)}return c.isSame(s)?""+c.format(n):c.month()===s.month()?c.format(n)+"\u2013"+s.format(t):c.format(n)+"\u2013"+s.format(n)},c}(Shopify.SummaryReport),a=function(t){return Shopify.Time.fromShop(moment(t)).moment.clone()},o=function(t){return Shopify.Time.nowShop().moment.clone().startOf(t)},r=function(t){return Shopify.Time.nowShop().moment.clone().endOf(t)}}).call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeTopReferrersReport=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.classicQueries=function(){return{totalSessions:"SHOW total_sessions\nFROM visits\nWHERE referrer_source == 'Unknown'\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,topReferrers:"SHOW total_sessions\nBY referrer_host\nFROM visits\nWHERE referrer_source == 'Unknown'\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY total_sessions DESC\nLIMIT 5"}},n.prototype.initializeView=function(){return this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")},n.prototype.renderResult=function(t){var e,n,i,r;return r=t[0].result.data[0][0],i=t[1].result.data,i.length?(e=i.map(function(t){return function(e){return{referrerURL:null!=e[0].match(t.URL_REGEX)?"http://"+t.formatLink(e[0]):void 0,referrerName:t.formatLink(e[0]),referrerCount:Shopify.Number.condensed(e[1]),percentage:t._formatPercentage(e[1]/r)}}}(this)),n=e.filter(function(t){return"0%"!==t.percentage}),this.append(this.resultTemplate,{referrers:n})):void this.append(this.noDataTemplate)},n.prototype.renderError=function(){},n.prototype._formatPercentage=function(t){return Math.floor(100*t)+"%"},n}(Shopify.HomeSidebarReport)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeBuyButtonTopEmbedLinksReport=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.queries=function(){return{totalEmbeds:"SHOW total_visitors\nFROM buy_button_impression\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,topEmbeds:"SHOW total_visitors BY embedded_path\nFROM buy_button_impression\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY total_visitors DESC\nLIMIT 3"}},n}(Shopify.HomeTopReferrersReport)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeTopProductsReport=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.salesModelQueries=function(){return{topProducts:"SHOW gross_sales, total_quantity\nBY product_id, product_title, variant_title\nFROM sales\n"+this.queryProps.channelFilter+" "+(this.queryProps.channelFilter?"AND":"WHERE")+" sale_line_type == 'product'\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY total_quantity DESC\nLIMIT 3"}},n.prototype.classicQueries=function(){var t;return t="WHERE financial_status != 'refunded'",this.queryProps.channelFilter.length&&(t+=" AND "+this.queryProps.channelFilter.split("WHERE ")[1]),
{topProducts:"SHOW total_sales, quantity_count BY product_id, product_title, variant_title\nFROM products\n"+t+"\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY quantity_count DESC\nLIMIT 3"}},n.prototype.initializeView=function(){return this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")},n.prototype.renderResult=function(t){var e,n;return e=t[0].result.data,e.length?(n=e.map(function(t,n){return{id:t[0],name:t[1],variant:"Default Title"===t[2]?null:t[2],sales:Shopify.Money.format(t[3],Shopify.Money.moneyUnencodedFormat()),metric:Shopify.Number.condensed(t[4]),isLastEntry:n===e.length-1}}),this.append(this.resultTemplate,{products:n})):void this.append(this.noDataTemplate)},n.prototype.renderError=function(){return this.append(this.errorTemplate)},n}(Shopify.HomeSidebarReport)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeTopViewedProductsReport=function(e){function n(t,e){this.channelId=e.channelId,this.channelName=e.channelName,this.homeSidebar=e.homeSidebar,n.__super__.constructor.call(this,t,{channelId:this.channelId,homeSidebar:this.homeSidebar}),this.queryProps.channelName=this.channelName}return t(n,e),n.prototype.classicQueries=function(){return{topProducts:"SHOW total_views BY product_id\nFROM daily_channel_product_listing_engagements\nWHERE channel_provider_name == '"+this.queryProps.channelName+"'\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY total_views DESC\nLIMIT 3"}},n.prototype.renderResult=function(t){var e,n,i;return e=t[0].result.data,e.length?(n=e.map(function(t){return t[0]}),i=function(t){return this.append(this.resultTemplate,{products:t})},this._loadProductTitles(n).then(function(t){return e.map(function(n,i){return{id:n[0],views:Shopify.Number.condensed(n[1]),name:t[n[0]],isLastEntry:i===e.length-1}})}).then(i.bind(this)).fail(this.renderError.bind(this))):void this.append(this.noDataTemplate)},n.prototype._loadProductTitles=function(t){return $.ajax({url:Shopify.routes.products().json+"?ids="+t.join(",")+"&fields=id,title",type:"GET",dataType:"json"}).then(function(t){var e;return e={},t.products.forEach(function(t){return e[t.id]=t.title}),e})},n}(Shopify.HomeTopProductsReport)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeBuyButtonTopViewedProductsReport=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.queries=function(){return{topProducts:"SHOW total_visitors BY product_id\nFROM buy_button_impression\nWHERE product_id != 0\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY total_visitors DESC\nLIMIT 3"}},n.prototype.renderResult=function(t){var e,n,i;return e=t[0].result.data,e.length?(n=e.map(function(t){return t[0]}),i=function(t){return this.append(this.resultTemplate,{products:t})},this._loadProductTitles(n).then(function(t){var n;return n=e.map(function(n,i){return{id:n[0],views:Shopify.Number.condensed(n[1]),name:t[n[0]],isLastEntry:i===e.length-1}})}).then(i.bind(this)).fail(this.renderError.bind(this))):void this.append(this.noDataTemplate)},n}(Shopify.HomeTopViewedProductsReport)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeBuyButtonVisitorsReport=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.queries=function(){var t,e;return e=this.queryProps.startDate===this.queryProps.endDate,t=e?"hour":"day",{visits:"SHOW total_sessions, total_visitors\nOVER "+t+"(viewed_at)\nAS "+t+"\nFROM buy_button_impression\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY "+t+" ASC",totalVisitors:"SHOW total_sessions\nFROM buy_button_impression\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,totalUniqueVisitors:"SHOW total_visitors\nFROM buy_button_impression\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate}},n.prototype.initializeView=function(){var t;return t={formatPrimaryValue:function(t){return function(e){return t.formatNumber(e)+" "+Shopify.Inflection.pluralize(e,"visitor")}}(this),formatSecondaryValue:function(t){return function(e){return t.formatNumber(e)+" unique"}}(this),formatYAxisValue:function(t){return Shopify.Number.condensed(t)}},this.transformGraphData=Shopify.HomeGraphTransformer({type:"visits",dataFormatters:t}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")},n.prototype.renderResult=function(t){var e,n;return n=t[1].result.data,e=t[2].result.data,n?this.append(this.resultTemplate,{visitors:Shopify.Number.withDelimiter(n),uniques:Shopify.Number.withDelimiter(e),graph:this.transformGraphData(t[0].result)}):this.append(this.noDataTemplate)},n.prototype.renderError=function(){return this.append(this.errorTemplate)},n}(Shopify.HomeSidebarReport)}.call(this),function(){var t,e,n,i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;e="1",n="2",t="4",Shopify.HomeChannelsSummaryReport=function(t){function e(t,n){var i;i=n.channels,this.channels=i.filter(function(t){return"All channels"!==t.name}),e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype._salesAndOrdersQuery=function(t){var e,n,i,r,o,a;return e=t.id,i=t.name,o=e.split("-"),r=o[0],n=o[1],a="WHERE channel_provider_id == "+r,n&&(a+=" AND location_id == '"+n+"'"),"SHOW\n  total_sales AS 'sales "+e+"',\n  total_orders AS 'orders "+e+"'\nFROM sales\n"+a+"\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate},e.prototype._legacySalesAndOrdersQuery=function(t){var e,n,i,r,o,a;return e=t.id,i=t.name,o=e.split("-"),r=o[0],n=o[1],a="WHERE financial_status != 'refunded'",a+=" AND channel_provider_id == "+r,n&&(a+=" AND location_id == '"+n+"'"),"SHOW\n  total_sales AS 'sales "+e+"',\n  order_count AS 'orders "+e+"'\nFROM orders\n"+a+"\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate},e.prototype.salesModelQueries=function(){var t;return t={},this.channels.forEach(function(e){return function(n){return t[n.name+"-"+n.id]=e._salesAndOrdersQuery(n)}}(this)),t},e.prototype.classicQueries=function(){var t;return t={},this.channels.forEach(function(e){return function(n){return t[n.name+"-"+n.id]=e._legacySalesAndOrdersQuery(n)}}(this)),t},e.prototype.initializeView=function(){return $(".page__sidebar").on("click",".home-channel-summary__link",this._suppressChannelChange),this.resultTemplate=this.createTemplate(".js-template-success"),this.errorTemplate=this.createTemplate(".js-template-error"),this.iconTemplate=this.createTemplate(".js-template-icons")},e.prototype.renderResult=function(t){var e,i;return i={},this.channels.forEach(function(e){return function(r,o){var a,s,u;return s=t[o].result.data[0],u=s[0],a=s[1],r.id[0]===n&&(r.name=e._formatChannelDisplayName(r)),i[r.name+"-"+r.id]=_.assign(r,{sales:""+e._formatMoney(u),orders:e._formatNumber(a)+" "+Shopify.Inflection.pluralize(a,"order")})}}(this)),e=this.append(this.resultTemplate,{formattedDate:this.homeSidebar.formattedDate,channels:i}),Bindings.bind(e.find(".js-button-wrapper")[0]),this._injectIcons(i)},e.prototype.renderError=function(){},e.prototype.changeChannel=function(t){return Shopify.rootDispatcher.dispatch({type:Shopify.SummaryReportChannelpicker.CHANNEL_CHANGED_EVENT,data:t})},e.prototype._suppressChannelChange=function(t){return t.stopPropagation()},e.prototype._injectIcons=function(){var t,e,n,i,r,o,a;for(o=this.channels,a=[],n=0,r=o.length;r>n;n++)e=o[n],(t=$(".icon-for-"+_.kebabCase(e.id)))&&(i=this.iconTemplate({channelId:e.id}).trim())&&a.push(t.html(i));return a},e.prototype._formatMoney=function(t){return Shopify.Money.format(t,Shopify.Money.moneyUnencodedFormat())},e.prototype._formatNumber=function(t){return Shopify.Number.condensed(t)},e.prototype._formatChannelDisplayName=function(t){return t.name.replace(/Point of sale/,"Shopify POS")},e}(Shopify.HomeSidebarReport)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeSidebarEngagementsReport=function(e){function n(t,e){this.channelId=e.channelId,this.channelName=e.channelName,this.homeSidebar=e.homeSidebar,n.__super__.constructor.call(this,t,{channelId:this.channelId,homeSidebar:this.homeSidebar}),this.queryProps.channelName=this.channelName}return t(n,e),n}(Shopify.HomeSidebarReport)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeConversionReport=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.salesModelQueries=function(){var t;return t=this.classicQueries(),t.totalPurchased="SHOW total_orders\nFROM sales\nWHERE channel_provider_name == '"+this.queryProps.channelName+"'\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,t},n.prototype.classicQueries=function(){return{views:"SHOW total_views, total_clicks\nFROM daily_channel_product_listing_engagements\nWHERE channel_provider_name == '"+this.queryProps.channelName+"'\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,totalPurchased:"SHOW order_count\nFROM orders\nWHERE financial_status != 'refunded'\nAND channel_name == '"+this.queryProps.channelName+"'\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate}},n.prototype.initializeView=function(){return this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")},n.prototype.renderResult=function(t){var e,n,i,r,o;return n=t[0].result.data[0],o=n[0],i=n[1],r=t[1].result.data[0][0],0===o?void this.append(this.noDataTemplate):(e={reachedCheckout:i.toLocaleString(),reachedCheckoutPercentage:this._formatPercentage(i/o),purchased:r.toLocaleString(),purchasedPercentage:this._formatPercentage(r/o)},this.append(this.resultTemplate,e))},n.prototype.renderError=function(){return this.append(this.errorTemplate)},n.prototype._formatPercentage=function(t){return(100*t).toFixed(2)+"%"},n}(Shopify.HomeSidebarEngagementsReport)}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=4,Shopify.HomeFacebookReport=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.salesModelQueries=function(){var e;return e=this.classicQueries(),e.facebookSales="SHOW\n  total_sales,\n  total_orders\nFROM sales\nWHERE channel_provider_id == "+t+"\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,e},i.prototype.classicQueries=function(){return{postEngagement:"SHOW\n  total_impressions,\n  total_views,\n  total_favorites,\n  total_shares,\n  total_comments\nFROM daily_channel_post_engagement_facts\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,adEngagement:"SHOW\n  total_ad_spend,\n  total_referred_order_value,\n  total_referred_order_count\nFROM daily_channel_ad_engagement_facts\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,facebookSales:"SHOW\n  total_sales,\n  order_count\nFROM orders\nWHERE financial_status != 'refunded'\nAND channel_provider_id == "+t+"\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate}},i.prototype.initializeView=function(){return this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")},i.prototype.renderResult=function(t){var e,n,i,r,o,a,s,u,l,c,d,h;return d=function(t,e){return null==t&&(t=0),t+e},s=t[0].result.data[0],e=t[1].result.data[0],c=t[2].result.data[0],0===s.reduce(d)&&0===e.reduce(d)?this.append(this.noDataTemplate):(h=e[0],r=c[0],i=c[1],u=e.slice(1),a=u[0],o=u[1],n=i||o?h/(i+o):0,l=h>0?(r+a)/h:0,this.append(this.resultTemplate,{reach:this.formatNumber(s[0]),engagement:{clicks:this.formatNumber(s[1]),likesCommentsShares:this.formatNumber(s.slice(2,5).reduce(d))},ads:{facebookSales:this.formatMoney(r),offsiteSales:this.formatMoney(a),averageCostPerSale:this.formatMoney(n),returnPerDollarSpent:this.formatMoney(l),totalSpent:this.formatMoney(h)}}))},i.prototype.renderError=function(){return this.append(this.errorTemplate)},i}(Shopify.HomeSidebarReport)}.call(this),function(){var t,e,n,i,r,o,a,s,u,l,c,d,h,p=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};e={height:101,minBarHeight:2,minGraphHeight:10,minTooltipPositionPercent:10,maxTooltipPositionPercent:90,fixXAxisBreakpoint:20,reduceSpacingBreakpoint:40,removeSpacingBreakpoint:90,yAxisTickCount:6,yAxisMinTickSize:5},t={day:"MMMM D, YYYY",dayCondensed:"MMM D",hour:"ha"},Shopify.HomeGraphTransformer=function(t){var l;if(null==t&&(t={}),!(l=t.dataFormatters))throw new Error("HomeGraphHelper requires dataFormatters to format values and the y-axis.");return function(h){var f,m,g,y,v,b,S,C,w,E,A;return m=h.data.length,E=e.height/(e.yAxisTickCount-1),A=c(a(h.data),o(h.data)),g=A[0],y=_.last(A),C=g-y,f={type:t.type||"sales",hasManyPoints:m>e.fixXAxisBreakpoint,barSpacing:i(m),bars:[],originPosition:Math.round(A.indexOf(0)*E),xAxis:[],yAxis:d(A,l.formatYAxisValue)},v=Shopify.Time.nowShop().moment,b=r(h),S=b.tooltipDateFormat,w=b.xAxisDateFormat,h.data.forEach(function(t){return function(t,e){var i,r,o,a,c,d;return r=t[0],o=t[1],a=t[2],i=Shopify.Time.fromShop(r).moment.isAfter(v),i||(c={date:Shopify.Time.fromShop(r).moment.format(S),horizontalPosition:s(e,m),primaryValue:l.formatPrimaryValue(o)},l.formatSecondaryValue&&(c.secondaryValue=l.formatSecondaryValue(a))),f.bars.push({rawValue:o,height:n(o,C),tooltip:c,inFuture:i}),p.call(u(m),e)>=0&&(d=Shopify.Time.fromShop(r).moment.format(w)),f.xAxis.push(d||"")}}(this)),f}},c=function(t,n){var i,r,o,a,s,u;return i=Math.abs(n-t),0>t&&(a=1+1/e.yAxisTickCount,i*=a),u=i/(e.yAxisTickCount-1),u=l(u,h(u)/2),s=Math.ceil(Math.abs(t)/u),o=function(){r=[];for(var t=0,n=e.yAxisTickCount;n>=0?n>t:t>n;n>=0?t++:t--)r.push(t);return r}.apply(this).map(function(t,e){return(e-s)*u}).reverse()},d=function(t,e){var n;return n=t.map(function(t,n){return{value:e(t),visible:n%2===0}})},l=function(t,n){return t=Math.ceil(t),t+=n-t%n,t=Math.round(t),Math.max(t,e.yAxisMinTickSize)},h=function(t){return Math.pow(10,Math.ceil(t).toString().length-1)},a=function(t){var e,n;return n=function(t,e){var n,i;return n=e[0],i=e[1],Math.min(t,i)},e=Math.min(0,t.reduce(n,0))},o=function(t){var e,n;return n=function(t,e){var n,i;return n=e[0],i=e[1],Math.max(t,i)},e=Math.max(0,t.reduce(n,0))},r=function(e){var n,i,r;return n="hour"===e.columns[0].field,i=t.day,n&&(i+=" "+t.hour),r=n?t.hour:t.dayCondensed,{tooltipDateFormat:i,xAxisDateFormat:r}},i=function(t){return t>e.removeSpacingBreakpoint?0:t>e.reduceSpacingBreakpoint?1:Math.max(Math.floor(e.reduceSpacingBreakpoint/t),2)},n=function(t,n){var i;return i=Math.abs(t)/n*e.height,Math.round(Math.max(i,e.minBarHeight))},s=function(t,n){var i;return i=Math.round(100*t/n),i=Math.max(i,e.minTooltipPositionPercent),i=Math.min(i,e.maxTooltipPositionPercent)},u=function(t){var e,n,i,r;if(r=[0,t-1],t>=7)r.push(Math.floor(1*t/3)),r.push(Math.floor(2*t/3));else for(n=e=1,i=t-2;i>=1?i>=e:e>=i;n=i>=1?++e:--e)r.push(n);return r}}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeMarketingCampaignsReport=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.classicQueries=function(){return{totalMarketingCampaigns:"SHOW total_sessions\nFROM visits\nWHERE utm_campaign_name != ''\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,topMarketingCampaigns:"SHOW total_sessions\nBY utm_campaign_name\nFROM visits\nWHERE utm_campaign_name != ''\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY total_sessions DESC\nLIMIT 5"}},n.prototype.initializeView=function(){return this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")},n.prototype.renderResult=function(t){var e,n,i;return i=t[0].result.data[0][0],n=t[1].result.data,n.length?(e=n.map(function(t){return function(e){return{referrerName:e[0],referrerCount:Shopify.Number.condensed(e[1]),percentage:t._formatPercentage(e[1]/i)}}}(this)),this.append(this.resultTemplate,{referrers:e})):void this.append(this.noDataTemplate)},n.prototype.renderError=function(){},n.prototype._formatPercentage=function(t){return Math.floor(100*t)+"%"},n}(Shopify.HomeSidebarReport)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeOnlineStoreConversionReport=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.salesModelQueries=function(){var t;return t=this.classicQueries(),t.totalPurchased="SHOW total_orders\nFROM sales\nWHERE channel_provider_name == 'Online Store'\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,t},n.prototype.classicQueries=function(){return{sessionsFunnel:"SHOW total_sessions, total_carts, total_reached_checkouts\nFROM visits\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,totalPurchased:"SHOW order_count\nFROM orders\nWHERE financial_status != 'refunded'\nAND channel_name == 'Online Store'\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate}},n.prototype.renderResult=function(t){var e,n,i,r,o,a;return r=t[0].result.data[0],a=r[0],e=r[1],i=r[2],o=t[1].result.data[0][0],0===a?void this.append(this.noDataTemplate):(n={addsToCart:e.toLocaleString(),addsToCartPercentage:this._formatPercentage(e/a),reachedCheckout:i.toLocaleString(),reachedCheckoutPercentage:this._formatPercentage(i/a),purchased:o.toLocaleString(),purchasedPercentage:this._formatPercentage(o/a)},this.append(this.resultTemplate,n))},n}(Shopify.HomeConversionReport)}.call(this),function(){var t,e,n,i,r=function(t,e){return function(){return t.apply(e,arguments)}};e="today",t="all",i="homeSidebarDate",n="homeSidebarChannel",Shopify.HomeSidebar=function(){function o(t,n,o){var a;this.node=t,this.hasFinanceReports=o,this.setActiveChannel=r(this.setActiveChannel,this),this._showPickers=r(this._showPickers,this),this._updateChannelPicker=r(this._updateChannelPicker,this),a=n.map(function(t){return t.id}),this.currentChannelId=this._getInitialChannelId(a),this.initialDate=SafeLocalStorage.get(i,e),setTimeout(this._updateChannelPicker,0)}return o.prototype._getInitialChannelId=function(e){var i;return i=null,this._urlParams().map(function(t){var e,n,r;return n=t.split("="),e=n[0],r=n[1],"cid"===e?i=decodeURIComponent(r):void 0}),-1!==e.indexOf(i)?i:(i=SafeLocalStorage.get(n,t),-1!==e.indexOf(i)?i:t)},o.prototype._urlParams=function(){return window.location.search.substring(1).split("&")},o.prototype._updateChannelPicker=function(){return this._setChannelPickerLabel(),setTimeout(this._showPickers,0)},o.prototype._setChannelPickerLabel=function(){return Shopify.rootDispatcher.dispatch({type:Shopify.SummaryReportChannelpicker.CHANNEL_CHANGED_EVENT,data:this.currentChannelId})},o.prototype._showPickers=function(){return $(this.node).removeClass("next-card--home-channel-filters--loading")},o.prototype.setActiveDate=function(t,e){return this.formattedDate=e,SafeLocalStorage.set(i,t)},o.prototype.setActiveChannel=function(t){return this.currentChannelId=t,SafeLocalStorage.set(n,this.currentChannelId)},o.prototype.isActive=function(t){return t===this.currentChannelId},o}()}.call(this),function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}};e="MMM D",t="D",Shopify.HomeSidebarDatepicker=function(){function r(t,e){this.selectedDate=null!=e?e:"today",this.onDateChanged=i(this.onDateChanged,this),Shopify.rootDispatcher.register(this.constructor.DATE_CHANGED_EVENT,this.onDateChanged).bindToNode(t),this._initFormattedDates(),this._updateLabel()}return r.DATE_CHANGED_EVENT="home:sidebar:date-changed",r.prototype.changeDate=function(t){return Shopify.rootDispatcher.dispatch({type:this.constructor.DATE_CHANGED_EVENT,data:t})},r.prototype.onDateChanged=function(t){var e,n,i,r;return e=!0,i=t.data.split(","),r=i[0],n=i[1],r===n&&(e=this.selectedDate===t.data),this.selectedDate=t.data,this._updateLabel(),e&&Shopify.UIPopover.deactivate(),Bindings.refresh()},r.prototype._updateLabel=function(){var n,i,r;if(-1===this.selectedDate.indexOf(","))return this.dateLabel=Shopify.Inflection.titleize(this.selectedDate,!0);if(i=this.selectedDate.split(","),r=i[0],n=i[1],this.dateLabel=Shopify.Time.fromShop(moment(r)).formatInShop(e),r!==n)return moment(r).month()===moment(n).month()?this.dateLabel+="\u2013"+Shopify.Time.fromShop(moment(n)).formatInShop(t):this.dateLabel+="\u2013"+Shopify.Time.fromShop(moment(n)).formatInShop(e)},r.prototype._initFormattedDates=function(){var t;return t=Shopify.Time.nowShop().moment,this.formatted={today:t.format(e),yesterday:t.clone().subtract(1,"days").format(e),this_week:n(t,"week"),this_month:n(t,"month")}},r}(),n=function(n,i){var r,o,a;return a=n.clone().startOf(i),r=n.clone().endOf(i),o=e,a.month()===r.month()&&(o=t),a.format(e)+"\u2013"+r.format(o)}}.call(this),function(){var t,e,n,i,r;i="MMM D",n="MMMM YYYY",r="e",e="YYYY-MM-DD",t=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Shopify.HomeSidebarCalendar=function(){function i(t,e){this.$calendar=$(t).find(".js-home-calendar"),this._initTemplate(t),this._initEvents(t),this._loadDateRange({data:e.selectedDate})}return i.prototype._initTemplate=function(t){var e;return e=$(t).find(".js-template-calendar").remove(),this.template=_.template(e.html())},i.prototype._initEvents=function(t){return Shopify.rootDispatcher.register(Shopify.HomeSidebarDatepicker.DATE_CHANGED_EVENT,this._loadDateRange.bind(this)).bindToNode(t),this.$calendar.on("click",".btn",this._dateClicked.bind(this)),Page.onReplace(t,function(t){return function(){return t.$calendar.off("click")}}(this))},i.prototype._loadDateRange=function(t){var e,n,i,r,o;switch(e=t.data,o=moment().startOf("day"),e){case"today":this.fromMoment=o,this.toMoment=o;break;case"yesterday":this.fromMoment=o.clone().subtract(1,"day"),this.toMoment=o.clone().subtract(1,"day");break;case"this_week":this.fromMoment=o.clone().startOf("week"),this.toMoment=o.clone().endOf("week").startOf("day");break;case"this_month":this.fromMoment=o.clone().startOf("month"),this.toMoment=o.clone().endOf("month").startOf("day");break;default:i=e.split(","),r=i[0],n=i[1],this.fromMoment=moment(r),this.toMoment=moment(n)}return this._loadMonthFor(this.fromMoment)},i.prototype._render=function(e){var n;return n={weeks:e,monthName:this.monthName,DAYS_OF_THE_WEEK:t},this.$calendar.empty(),this.$calendar.append(this.template(n))},i.prototype.nextMonth=function(){return this._loadMonthFor(this.lastOfMonth.add(1,"day"))},i.prototype.prevMonth=function(){return this._loadMonthFor(this.firstOfMonth.subtract(1,"day"))},i.prototype._dateClicked=function(t){var e,n;return t.stopPropagation(),e=t.target.innerHTML.trim(),n=moment(new Date(this.firstOfMonth.year(),this.firstOfMonth.month(),e)),this.toMoment.isSame(this.fromMoment)&&n.isSame(this.toMoment)?this._updateDatepicker():this.toMoment.isSame(this.fromMoment)&&n.isAfter(this.fromMoment)?(this.toMoment=n,this._updateDatepicker()):(this.fromMoment=n,this.toMoment=n,this._updateDatepicker())},i.prototype._updateDatepicker=function(){var t;return t=this.fromMoment.format(e)+",",t+=""+this.toMoment.format(e),Shopify.rootDispatcher.dispatch({type:Shopify.HomeSidebarDatepicker.DATE_CHANGED_EVENT,data:t})},i.prototype._loadMonthFor=function(e){var i,o,a,s,u,l,c,d;for(d=[],c={},a=0,this.firstOfMonth=e.clone().startOf("month"),this.lastOfMonth=e.clone().endOf("month"),s=this.firstOfMonth.format(r),this.monthName=e.format(n);s>a;)c[t[a]]={date:""},a++;for(i=u=1,l=this.lastOfMonth.date();l>=1?l>=u:u>=l;i=l>=1?++u:--u)o=this.firstOfMonth.clone().add(i-1,"days"),c[t[a]]=this._dateWithMetadata(o),a++,7===a&&(a=0,d.push(c),c=i===this.lastOfMonth.date()?null:{});for(;c&&7>a;)c[t[a]]={date:""},a++;return c&&d.push(c),this._render(d)},i.prototype._dateWithMetadata=function(t){return{date:t.date(),isStart:t.isSame(this.fromMoment),isEnd:t.isSame(this.toMoment),isSelected:t.isAfter(this.fromMoment)&&t.isBefore(this.toMoment)}},i}()}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeTopCountriesReport=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.classicQueries=function(){return{totalSessions:"SHOW total_sessions\nFROM visits\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,topCountries:"SHOW total_sessions\nBY location_country\nFROM visits\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY total_sessions DESC\nLIMIT 5"}},n.prototype.initializeView=function(){return this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")},n.prototype.renderResult=function(t){var e,n,i,r;return r=t[0].result.data[0][0],i=t[1].result.data,i.length?(e=i.map(function(t){return function(e){return{referrerName:e[0]||"Unknown",referrerCount:Shopify.Number.condensed(e[1]),percentage:t._formatPercentage(e[1]/r)}}}(this)),n=e.filter(function(t){return"0%"!==t.percentage}),this.append(this.resultTemplate,{referrers:n})):void this.append(this.noDataTemplate)},n.prototype.renderError=function(){},n.prototype._formatPercentage=function(t){return Math.floor(100*t)+"%"},n}(Shopify.HomeSidebarReport)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeTopLandingPagesReport=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.classicQueries=function(){return{totalSessions:"SHOW total_sessions\nFROM visits\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,landingPages:"SHOW total_sessions\nBY page_path, host(page_url)\nFROM visits\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY total_sessions DESC\nLIMIT 5"}},n.prototype.initializeView=function(){return this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")},n.prototype.renderResult=function(t){var e,n,i,r;return r=t[0].result.data[0][0],i=t[1].result.data,i.length?(e=i.map(function(t){return function(e){return{referrerURL:"http://"+e[1]+e[0],referrerName:t.formatLink(e[0])||"Frontpage ("+t.formatLink(e[1])+")",referrerCount:Shopify.Number.condensed(e[2]),percentage:t._formatPercentage(e[2]/r)}}}(this)),n=e.filter(function(t){return"0%"!==t.percentage}),this.append(this.resultTemplate,{referrers:n})):void this.append(this.noDataTemplate)},n.prototype.renderError=function(){},n.prototype._formatPercentage=function(t){return Math.floor(100*t)+"%"},n}(Shopify.HomeSidebarReport)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeTopSearchReferrersReport=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.queries=function(){return{totalSessions:"SHOW total_sessions\nFROM visits\nWHERE referrer_source == 'Search'\nAND referrer_terms != ''\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,topSearchTerms:"SHOW total_sessions\nBY referrer_terms\nFROM visits\nWHERE referrer_source == 'Search'\nAND referrer_terms != ''\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY total_sessions DESC\nLIMIT 5"}},n.prototype.initializeView=function(){return this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")},n.prototype.renderResult=function(t){var e,n,i,r;return r=t[0].result.data[0][0],i=t[1].result.data,i.length?(e=i.map(function(t){return function(e){return{referrerName:t.formatLink(e[0]),referrerCount:Shopify.Number.condensed(e[1]),percentage:t._formatPercentage(e[1]/r)}}}(this)),n=e.filter(function(t){return"0%"!==t.percentage}),this.append(this.resultTemplate,{referrers:n})):void this.append(this.noDataTemplate)},n.prototype.renderError=function(){},n.prototype._formatPercentage=function(t){return Math.floor(100*t)+"%"},n}(Shopify.HomeSidebarReport)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeTopSocialReferrersReport=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.queries=function(){return{totalSessions:"SHOW total_sessions\nFROM visits\nWHERE referrer_source == 'Social'\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,topReferrers:"SHOW total_sessions\nBY referrer_name\nFROM visits\nWHERE referrer_source == 'Social'\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY total_sessions DESC\nLIMIT 5"}},n}(Shopify.HomeTopReferrersReport)}.call(this),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t="Point of Sale",Shopify.HomeTopStaffReport=function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return e(i,n),i.prototype.salesModelQueries=function(){var e,n,i;return i="0d"===this.queryProps.startDate||"-1d"===this.queryProps.startDate,n=i?"hour":"day",e=this.channelId.split("-")[1],{topStaff:"SHOW total_orders, total_sales\nBY employee_id, employee_name\nFROM sales\nWHERE channel_provider_name == '"+t+"' AND location_id == '"+e+"'\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY total_orders DESC\nLIMIT 3"}},i.prototype.classicQueries=function(){var e,n,i;return i="0d"===this.queryProps.startDate||"-1d"===this.queryProps.startDate,n=i?"hour":"day",e=this.channelId.split("-")[1],{topStaff:"SHOW order_count, total_sales\nBY employee_id, employee_name\nFROM orders\nWHERE financial_status != 'refunded'\nAND channel_name == '"+t+"'\nAND location_id == '"+e+"'\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY order_count DESC\nLIMIT 3"}},i.prototype.initializeView=function(){return this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")},i.prototype.renderResult=function(t){var e,n;return e=t[0].result.data,e.length?(n=e.map(function(t,n){return{id:t[0],name:t[1],orderCount:Shopify.Number.condensed(t[2]),totalSales:Shopify.Money.format(t[3],Shopify.Money.moneyUnencodedFormat()),
average:t[2]?"$"+Shopify.Money.formatWithDelimiters(t[3]/t[2]):"$0.00",isLastEntry:n===e.length-1}}),this.append(this.resultTemplate,{staffMembers:n})):void this.append(this.noDataTemplate)},i.prototype.renderError=function(){return this.append(this.errorTemplate)},i}(Shopify.HomeSidebarReport)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeViewsReport=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.classicQueries=function(){return{views:"SHOW total_views\nOVER day(occurred_on)\nAS day\nFROM daily_channel_product_listing_engagements\nWHERE channel_provider_name == '"+this.queryProps.channelName+"'\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY day ASC",totalViews:"SHOW total_views\nFROM daily_channel_product_listing_engagements\nWHERE channel_provider_name == '"+this.queryProps.channelName+"'\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate}},n.prototype.initializeView=function(){var t;return t={formatPrimaryValue:function(t){return function(e){return t.formatNumber(e)+" "+Shopify.Inflection.pluralize(e,"view")}}(this),formatYAxisValue:function(t){return Shopify.Number.condensed(t)}},this.transformGraphData=Shopify.HomeGraphTransformer({type:"visits",dataFormatters:t}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")},n.prototype.renderResult=function(t){var e,n,i;return e=t[0].result,e.data.length?(n=Shopify.Number.withDelimiter(t[1].result.data[0][0]),i=Shopify.Inflection.pluralize(n,"view"),this.append(this.resultTemplate,{views:n+" "+i,graph:this.transformGraphData(e)})):this.append(this.noDataTemplate)},n.prototype.renderError=function(){return this.append(this.errorTemplate)},n}(Shopify.HomeSidebarEngagementsReport)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeOnlineStoreVisitorsReport=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.classicQueries=function(){var t,e;return e=this.queryProps.startDate===this.queryProps.endDate,t=e?"hour":"day",{totalSessions:"SHOW total_sessions\nFROM visits\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,totalVisitors:"SHOW total_visitors\nFROM visits\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate,visits:"SHOW total_sessions, total_visitors\nOVER "+t+"(timestamp)\nAS "+t+"\nFROM visits\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY "+t+" ASC"}},n.prototype.initializeView=function(){var t;return t={formatPrimaryValue:function(t){return function(e){return t.formatNumber(e)+" visitors"}}(this),formatSecondaryValue:function(t){return function(e){return t.formatNumber(e)+" unique"}}(this),formatYAxisValue:function(t){return Shopify.Number.condensed(t)}},this.transformGraphData=Shopify.HomeGraphTransformer({type:"visits",dataFormatters:t}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")},n.prototype.renderResult=function(t){var e,n;return n=t[0].result.data,e=t[1].result.data,n?this.append(this.resultTemplate,{visitors:Shopify.Number.withDelimiter(n),uniques:Shopify.Number.withDelimiter(e),graph:this.transformGraphData(t[2].result)}):this.append(this.noDataTemplate)},n.prototype.renderError=function(){return this.append(this.errorTemplate)},n}(Shopify.HomeViewsReport)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeSalesReport=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.salesModelQueries=function(){var t,e;return e=this.queryProps.startDate===this.queryProps.endDate,t=e?"hour":"day",{sales:"SHOW total_sales, total_orders\nOVER "+t+"(processed_at)\nAS "+t+"\nFROM sales\n"+this.queryProps.channelFilter+"\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY "+t+" ASC"}},n.prototype.classicQueries=function(){var t,e,n;return e=this.queryProps.startDate===this.queryProps.endDate,t=e?"hour":"day",n="WHERE financial_status != 'refunded'",this.queryProps.channelFilter.length&&(n+=" AND "+this.queryProps.channelFilter.split("WHERE ")[1]),{sales:"SHOW total_sales, order_count\nOVER "+t+"(processed_at)\nAS "+t+"\nFROM orders\n"+n+"\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY "+t+" ASC"}},n.prototype.initializeView=function(){var t;return t={formatPrimaryValue:function(t){return function(e){return t.formatMoney(e)}}(this),formatSecondaryValue:function(t){return function(e){return t.formatNumber(e)+" orders"}}(this),formatYAxisValue:function(t){return function(e){return t.formatMoneyCondensed(e)}}(this)},this.transformGraphData=new Shopify.HomeGraphTransformer({dataFormatters:t}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")},n.prototype.renderResult=function(t){var e,n,i;return i=t[0].result,i.data.length?(e=Shopify.Number.withDelimiter(i.summary[2]),n=Shopify.Inflection.pluralize(i.summary[2],"order"),this.append(this.resultTemplate,{total:Shopify.Money.format(i.summary[1],Shopify.Money.moneyUnencodedFormat()),orders:e+" "+n,graph:this.transformGraphData(i)})):this.append(this.noDataTemplate)},n.prototype.renderError=function(){return this.append(this.errorTemplate)},n}(Shopify.HomeSidebarReport)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.HomeTotalSalesBreakdown=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.salesModelQueries=function(){var t,e;return e=this.queryProps.startDate===this.queryProps.endDate,t=e?"hour":"day",{totalSalesBreakdown:'SHOW total_sales,\n  orders,\n  sum((IF (sale_line_type IN ("product", "shipping", "unknown") AND sale_kind == "order") THEN amount_after_discounts_after_tax)) AS order_sales,\n  sum((IF (sale_line_type IN ("product", "shipping", "unknown") AND sale_kind == "return") THEN amount_after_discounts_after_tax)) AS refunds_amount,\n  count(DISTINCT (IF (sale_kind == "return") THEN order_id)) AS refunds_count\nOVER '+t+"(processed_at)\nAS "+t+"\nFROM sales\n"+this.queryProps.channelFilter+"\nSINCE "+this.queryProps.startDate+"\nUNTIL "+this.queryProps.endDate+"\nORDER BY "+t+" ASC"}},n.prototype.initializeView=function(){return this.resultTemplate=this.createTemplate(".js-template-success")},n.prototype.renderResult=function(t){var e,n,i,r,o,a,s,u;return a=t[0].result,a.data.length?(i=a.summary,e=i[0],u=i[1],n=i[2],s=i[3],r=i[4],o=i[5],o>0?(this.append(this.resultTemplate,{formattedDate:this.homeSidebar.formattedDate,totalSales:Shopify.Money.format(u,Shopify.Money.moneyUnencodedFormat()),sales:Shopify.Money.format(s,Shopify.Money.moneyUnencodedFormat()),refundsAmount:Shopify.Money.format(r,Shopify.Money.moneyUnencodedFormat())}),this.$node.show()):this.$node.hide()):void this.$node.hide()},n.prototype.renderError=function(){return this.$node.hide()},n}(Shopify.HomeSidebarReport)}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Shopify.PollableMetric=function(){function e(e,n){this.options=e,this.onDataReceived=n,this.handleData=t(this.handleData,this),this._poll=t(this._poll,this),this.pollFrequencyIndex=this.DEFAULT_POLL_FREQUENCY_INDEX}return e.prototype.POLL_FREQUENCIES=[5e3,1e4,3e4,6e4],e.prototype.DEFAULT_POLL_FREQUENCY_INDEX=0,e.prototype.startPolling=function(){return this.timeout=window.setTimeout(this._poll,0)},e.prototype.stopPolling=function(){return window.clearTimeout(this.timeout),this.timeout=null},e.prototype._poll=function(){return Shopify.AnalyticsAPI.query(this.query()).then(this.handleData.bind(this))},e.prototype.handleData=function(t){var e,n,i;return i=t.result,n=i.data,n&&n[0]&&(e=this._transformData(n[0]),this._hasChanged(e)?(this.onDataReceived(e),this.pollFrequencyIndex=this.DEFAULT_POLL_FREQUENCY_INDEX):this.pollFrequencyIndex!==this.POLL_FREQUENCIES.length-1&&this.pollFrequencyIndex++),this.timeout=window.setTimeout(this._poll,this.POLL_FREQUENCIES[this.pollFrequencyIndex])},e.prototype._transformData=function(t){return t},e.prototype._hasChanged=function(t){return this.cachedData&&_.isEqual(t,this.cachedData)?!1:(this.cachedData=t,!0)},e}()}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.PollableSalesMetric=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.QUERY="SHOW total_sales, total_orders FROM sales SINCE -0d UNTIL -0d",n.prototype.LEGACY_QUERY="SHOW total_sales, order_count FROM orders WHERE financial_status != 'refunded' SINCE -0d UNTIL -0d",n.prototype.DEFAULT_POLL_FREQUENCY_INDEX=1,n.prototype.query=function(){return this.options.useSalesModel?this.QUERY:this.LEGACY_QUERY},n.prototype._transformData=function(t){return{totalSales:t[0],totalOrders:t[1]}},n}(Shopify.PollableMetric)}.call(this),function(){var t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t},e={}.hasOwnProperty;Shopify.PollableVisitsMetric=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.QUERY="SHOW total_sessions, total_visitors FROM visits SINCE -0d UNTIL -0d",n.prototype.query=function(){return this.QUERY},n.prototype._transformData=function(t){return{totalVisits:t[0],uniqueVisits:t[1]}},n}(Shopify.PollableMetric)}.call(this),function(){}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Shopify.SocialMarketingFrame=function(){function e(e){this.url=e,this.receive=t(this.receive,this),this.show=t(this.show,this),this.onLoad=t(this.onLoad,this),this.pageReceive=t(this.pageReceive,this),this.context=Twine.context(document.body),Shopify.rootDispatcher.register("SocialMarketingFrameOpen",this.show),window.addEventListener("message",this.receive),document.addEventListener("page:receive",this.pageReceive)}return e.prototype.loaded=!1,e.prototype.pageReceive=function(){return Shopify.rootDispatcher.remove("SocialMarketingFrameOpen",this.show),document.removeEventListener("page:receive",this.pageReceive)},e.prototype.onLoad=function(t){return""!==t.target.src&&(this.loaded=!0),Twine.refresh()},e.prototype.show=function(t){return null==t&&(t={}),null!=t.url?this.src=t.url:this.src=this.url,t.funnel&&(this.src=Shopify.UrlMangler.addQuery(Shopify.UrlMangler.getURL(this.src),{funnel:t.funnel})),Twine.refresh(),this.context.SocialMarketingModal.show()},e.prototype.receive=function(t){var e,n;try{e=JSON.parse(t.data)}catch(i){return}return e.closeMarketingModal&&(this.context.SocialMarketingModal.hide(),this.src="",this.loaded=!1),e.marketingFrameHeight&&(n=window.innerHeight-40,this.height=e.marketingFrameHeight<n?e.marketingFrameHeight:n),Twine.refresh()},e}()}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}};t="a, input, button, [data-bind-event-click], [aria-haspopup], td.select, .next-popover *",e=function(t){return"undefined"!=typeof Page&&null!==Page?Page.visit(t):location.href=t},Shopify.NestedLinkContainer=function(){function i(t){var e;this.node=t,this.linkTo=n(this.linkTo,this),e=$(this.node),this.href=e.find("a[data-nested-link-target]")[0].href,e.on("click",this.linkTo)}return i.BLACK_LIST=t,i.prototype.linkTo=function(n){return $(n.target).filter(t).length>0||this._hasSelection()?void 0:e(this.href)},i.prototype._hasSelection=function(){return window.getSelection().toString().length>0},i}()}.call(this);t(function(t,e){"use strict";window.__admin_bundles=window.__admin_bundles||{},window.__admin_bundles["shopify-home"]=!0})}();